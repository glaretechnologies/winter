TODO integer divison in Winter should use //

TODO: Make a new AST Node for lambda expression, instead of just using a FunctionDefinition AST node.


TODO: can remove UpdateUpRefs pass now?

Test capturing of destructured lets

checkSubstituteVariable probly has bugs.

remove payload.func_def_stack, replace with stack?


TODO: replace all (most?) set usage with unordered_set.

TODO: problem with inlining and then OpenCL output - variables may clash.  Need to rename all variables when inlining a function?

TODO: for tests that involve passing stuff to functions, need some kind of noinline attribute?  e.g. Test Refcounting optimisations: test that a argument variable used as a function argument is not incremented and decremented

TODO: make LetNodeVar an ast node?

TODO: check typechecking for function expressions with runtime get_func_expr's.

TODO: need i32 -> i64 coercion

TODO: need some way of making e.g. varrays with no elements.  Can't have a literal with no elements because then we don't know the type.


TODO: use CreateCall2() instead of CreateCall etc..  (only do once we know that void* hidden args won't be required to be appended?)

TODO: fold specialisation requires that each fold built-in be unique.

TODO: Fix stuff up for new variable bit width integer type - proofs etc..

TODO: add tests for update()

TODO: type checking for fold(), iterate() args etc..

TODO: operator overloading doesn't work in template bodies.
